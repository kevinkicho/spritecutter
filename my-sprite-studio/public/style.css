:root { --bg: #0f0f0f; --panel: #1e1e1e; --accent: #00bcd4; --text: #ddd; --border: #333; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; height: 100vh; overflow: hidden; }

/* Main Layout */
.app-grid { display: flex; height: 100%; width: 100%; }

/* Editor Area (Left) */
.editor-area { flex: 1; display: flex; flex-direction: column; background: #111; overflow: hidden; position: relative; }
.canvas-scroll-wrap { 
    flex: 1; 
    overflow: auto; 
    display: flex; 
    align-items: flex-start; /* Crucial: Starts content at top-left */
    justify-content: center;
    padding: 50px; 
}

/* Sidebar (Right) */
.ui-panel { 
    width: 360px; 
    background: var(--panel); 
    border-left: 1px solid var(--border); 
    display: block; /* Changed from flex to block to fix scrolling issues */
    padding: 20px; 
    overflow-y: auto; 
    height: 100%;
    box-sizing: border-box;
}

/* Control Groups */
.control-group { 
    background: #252525; 
    padding: 12px; 
    border-radius: 6px; 
    border: 1px solid #333; 
    margin-bottom: 15px;
}
label { font-size: 0.75em; color: #888; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 8px; }

/* Accordions */
.acc-header { 
    padding: 12px; background: #2a2a2a; cursor: pointer; font-size: 0.8em; font-weight: bold; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; color: #ccc; border-radius: 4px; margin-bottom: 5px;
}
.acc-header:hover { background: #333; color: #fff; }
.acc-header.active { background: #252525; color: var(--accent); border: 1px solid var(--accent); }
.acc-content { display: none; padding: 10px; background: #1e1e1e; border: 1px solid #333; border-radius: 4px; margin-bottom: 15px; }
.acc-content.show { display: block; }

/* Grids */
.sequencer-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); 
    gap: 4px; 
    max-height: 150px; 
    overflow-y: auto;
    background: #111;
    padding: 5px;
    border-radius: 4px;
}

.seq-item { 
    background: var(--accent); color: #000; padding: 6px 0; text-align: center; border-radius: 4px; font-weight: bold; font-size: 0.85em; position: relative; cursor: pointer; user-select: none; 
}
.seq-item:hover { filter: brightness(1.1); }
.seq-item.pool-item { background: #333; color: #aaa; border: 1px solid #444; }
.seq-item.pool-item:hover { background: #444; color: #fff; }

.remove-btn { 
    position: absolute; top: -4px; right: -4px; width: 14px; height: 14px; background: #ff5252; color: white; border-radius: 50%; font-size: 9px; line-height: 14px; cursor: pointer; border: 1px solid var(--panel); 
}

/* Anchor Presets */
.preset-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-bottom: 10px; }
.preset-btn { 
    background: #333; color: #aaa; border: 1px solid #444; border-radius: 4px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s;
}
.preset-btn:hover { background: #444; color: #fff; border-color: #666; }
.preset-btn:active { background: var(--accent); color: #000; }

.preview-card { background: #000; padding: 10px; border: 1px solid var(--accent); border-radius: 8px; text-align: center; margin-top: 10px; }
canvas { image-rendering: pixelated; }

button.main-action { width: 100%; padding: 12px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
.btn-zip { background: #7b1fa2; color: white; }
.btn-ghost { background: #444; color: white; width:100%; padding: 8px; border:none; border-radius:4px; color:#ddd; cursor:pointer; }
.status-bar { background: #000; padding: 5px 10px; font-size: 0.8em; color: var(--accent); border-top: 1px solid #333; }
